<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"  %>

	<jsp:include page="../includes/head.jsp"/>
		<script>
			function regresar(){
			    document.forms[0].action = "lista.htm";
			    document.forms[0].submit();
			}
		</script>
		
     <div id="contenedor">
         <!--Capa que contiene toda la plantilla-->
         <jsp:include page="../includes/cabecera.jsp" flush="true"/>
          
         <div id="cuerpo" align="center">
             <table class="anchoTotal" align="center" width="90%" border="1">
                 <tr>
                     <td id="anchoMenu" >
                         <jsp:include page="../includes/menu2.jsp" flush="true"/>
                     </td>
                     <td id="anchoCuerpo">
                     
                         <div id="contenido">
                             <!--Capa que contiene el cuerpo de la plantilla-->                                     
                             <h2>INFORMACION DE OFICIOS</h2>                                     
                             <h3> <span>DATOS DE OFICIO</span> </h3>
                             
								<div align="center" style="color: red"> <c:out value="${msgError}"/> </div>
								<div align="center" style="color: blue"> <c:out value="${mensaje}"/> </div>
                                           
                                   <!--  <h2>Datos de Alerta</h2> -->
                                   <h3><span>Datos de Oficio</span> </h3>
                                   
                                   <form:form name="frm2" action="#" method="post" modelAttribute="documento">
                                    
                                   <table class="bloqueTablaLineal" cellspacing="6">
                                        <tr>
                                            <th>Fecha de Ingreso:</th>
                                            <td><fmt:formatDate value="${documento.fecRegistro}" pattern="dd/MM/yyyy"/></td>
                                        </tr>
                                         <tr>
                                            <th>Persona que comunica:</th>
                                            <td>&nbsp;
	                                           <c:if test="${not empty documento.documentoPersonas}">
					                            	<c:forEach items="${documento.documentoPersonas}" var="per">
					                            		<c:if test="${per.tipoRelacion.idTipoRelacion == 3}">
					                            	   		${per.persona.nombreCompleto}<br>
					                            	   </c:if>
					                               </c:forEach>
					                           </c:if>
                                            </td>
                                        </tr>
                                         <tr>
                                            <th>Entidad:</th>
                                            <td>${documento.entidad.nomEntidad}</td>
                                        </tr>
                                         <tr>
                                            <th>Asunto:</th>
                                            <td>${documento.docAsunto}</td>
                                        </tr>
                                         <tr>
                                            <th>Detalle:</th>
                                            <td>${documento.docContenido}</td>
                                        </tr>
                                         <tr>
                                            <th>Documento de respuesta:</th>
                                            <td>${documento.docRespuesta}</td>
                                        </tr>
                                         <tr>
                                            <th>Fecha respuesta:</th>
                                            <td><fmt:formatDate value="${documento.fecDocrespuesta}" pattern="dd/MM/yyyy"/></td>
                                        </tr>
                                    </table>
                                    <c:if test="${ not empty documento.siArchivos }">
	                                    <table class="bloqueTablaLineal" cellspacing="6">
												<c:forEach items="${documento.siArchivos}" var="doc">
												<tr>
		                                            <th>Descargar Archivo:</th>
		                                            <td><a href="descargar.htm?id=${doc.idArchivo}">${doc.nombre}</a>&nbsp;</td>
		                                        </tr>
		                                        </c:forEach>
		                                   </table>
                                    </c:if>
                                    <table id="myTable" width="90%" align="center">
			                            <thead>
			                            	<tr>
			                            		<th class="tituloTabla" axis="string">Persona</th>
			                            		<th class="tituloTabla" axis="string">Documento</th>
			                                    <th class="tituloTabla" axis="string">Cargo</th>
			                                  </tr>
			                            </thead>
			                            <tbody>
			                            
			                             <c:if test="${not empty documento.documentoPersonas}">
			                            	<c:forEach items="${documento.documentoPersonas}" var="row">
			                            		<c:if test="${row.tipoRelacion.idTipoRelacion == 1}">
			                            	<tr>                                    
			                                    <td>&nbsp;<c:out value="${row.persona.nombreCompleto}"/></td>
			                                    <td>&nbsp;<c:out value="${row.persona.numDoc}"/></td>
			                                    <td>&nbsp;<c:out value="${row.cargo}"/></td>
			                                </tr>
			                                	</c:if>
			                               </c:forEach>
			                           </c:if>
			                           </tbody>
			                       </table>
                             <center>
                                 <table summary="Contenedor Botones"
                                        class="tablaAnchoAjustable">
                                     <tr>
                                         <td>
                                             <ul class="enlacesCentroAjustables">
                                                 <li>
                                                     <a onclick="javascript:regresar();" class="btnEnlaceCentro"> <span>Regresar</span> </a>
                                                 </li>
                                             </ul>
                                             <ul class="enlacesCentroAjustables">
                                                 <li> &nbsp; </li>
                                             </ul>
                                         </td>
                                     </tr>
                                 </table>
                             </center>
                             </form:form>
                             
                         </div>
                        
                     </td>
                 </tr>
             </table>
         </div>
     </div>
     <jsp:include page="../includes/pie.jsp" flush="true"/>
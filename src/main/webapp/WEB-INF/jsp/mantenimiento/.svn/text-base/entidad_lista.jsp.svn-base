<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib uri="http://displaytag.sf.net" prefix="display"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"  %>

	<jsp:include page="../includes/head.jsp"/>
    <script type="text/javascript">
    	function nuevo(){
    			document.forms[0].action="prenuevaEnt.htm";
    			document.forms[0].submit();
    	}
    	
    	function buscar(){
			document.forms[0].action="buscarEnt.htm";
			document.forms[0].submit();
		} 
    	
    	function eliminar(id){
    		if(confirm('seguro que desea eliminar la Entidad?')){
    			document.forms[0].action="eliminarEnt.htm?cod="+id;
    			document.forms[0].submit();	
    		}
		}	
    	
    	 $( function(){
      	   $("#displayTagDiv").displayTagAjax();
      	})
      	
    </script>
	<div id="contenedor"><!--Capa que contiene toda la plantilla-->
		<jsp:include page="../includes/cabecera.jsp" flush="true"/>
    <div id="cuerpo">
        <table class="anchoTotal">
        <tr>
        <td id="anchoMenu">
			<jsp:include page="../includes/menu2.jsp" flush="true"/>
		</td>
        <td id="anchoCuerpo">
          
           <form:form name="frmlista" action="#" method="post" modelAttribute="entidad">
           
            <div id="contenido"><!--Capa que contiene el cuerpo de la plantilla-->
            	<h2>Lista de Entidades</h2>
             
             	<div align="center" style="color: red"> <c:out value="${msgError}"/> </div>
				<div align="center" style="color: blue"> <c:out value="${mensaje}"/> </div>
            
                <h4>Busqueda</h4>     
                
              <div class="capaEnlace">
                    <center>
                        <table summary="Contenedor Botones" class="tablaAnchoAjustable"><tr><td>
                            <ul class="enlacesCentroAjustables">
                                <li>
                                    <table class="bloqueTablaLineal" summary="Datos del Calendario">
                                         <tr>
                                            <th>Tipo:</th>
                                            <td colspan="3">
                                            	<form:select path="tipo" cssStyle="height: 20px; width: 180px; font-family: Arial; font-size: 9pt">
                                            		<form:option value="-1">-TODOS-</form:option>
	                                            	<form:option value="2">Entidad</form:option>
	                                            	<form:option value="1">Notar&iacute;a</form:option>	                                            	
                                            	</form:select>
                                            </td>
                                        </tr>
                                      <tr>
                                        <th>Nombre:</th>
                                        <td colspan="3"><form:input path="nomEntidad" size="30"/></td>        
                                      </tr>
                                    </table>
                                </li>
                            </ul>
                        </td></tr></table>
                    </center>
                </div>
              <div class="capaEnlace">
                    <center>
                        <table summary="Contenedor Botones" class="tablaAnchoAjustable">
                        	<tr>
                        		<td>
                           
		                            <ul class="enlacesCentroAjustables">
								        <li><a  onclick="javascript:buscar();" class="btnEnlaceCentro"  ><span>Buscar</span></a></li>
								        <li><a  onclick="javascript:nuevo();" class="btnEnlaceCentro"  ><span>Nuevo</span></a></li>
		                            </ul>
                            
                        		</td>
                        	</tr>
                        </table>
                    </center>
                </div>
                                
                <h4>LISTADO DE ENTIDADES</h4>
                <div class="bloqueListadoDatos">
                    
                        <div id="displayTagDiv">
                             <display:table name="requestScope.lentidad" requestURI="buscarEnt.htm" class="displaytag" pagesize="25" defaultsort="1"
								defaultorder="ascending" export="false" id="row" excludedParams="ajax">
									<display:column title="Tipo" sortable="true" headerClass="sortable">
										<c:if test="${row.tipo == 1}">Notar&iacute;a</c:if>
                                    	<c:if test="${row.tipo == 2}">Entidad</c:if>
                                    	<c:if test="${row.tipo == 3}">CNL</c:if>
									</display:column>
									<display:column title="Entidad" property="nomEntidad" sortable="true" headerClass="sortable" />
									<display:column title="Acciones" sortable="true" headerClass="sortable" style=" width: 80px;">
						            	<a href="verEnt.htm?cod=${row.idEntidad}" style="border: 0px;" title="Ver"><img src="${pageContext.request.contextPath}/images/view.jpg" width="18" height="18" border="0"></a>
                                    	<a href="editarEnt.htm?cod=${row.idEntidad}" style="border: 0px;" title="Modificar"><img src="${pageContext.request.contextPath}/images/edit.png" width="18" height="18" border="0"></a>                                    	
                                    	<a href="javascript:eliminar(${row.idEntidad});" style="border: 0px;" title="Eliminar"><img src="${pageContext.request.contextPath}/images/error.png" width="18" height="18" border="0"></a>
						            </display:column>
							 </display:table>
		 				</div>
		 				
                </div>
            </div>
         </form:form>
         
        </td></tr></table>
    </div>
   
</div>
 <jsp:include page="../includes/pie.jsp" flush="true"/>
